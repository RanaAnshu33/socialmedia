{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Reels</title>

<meta name="csrf-token" content="{{ csrf_token }}">
<script src="https://kit.fontawesome.com/cb792c0850.js" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="shortcut icon" href="{% static 'css/linkup.jpg' %}" type="image/x-icon">
<link rel="stylesheet" href="{% static "css/reels.css" %}">

</head>
<body>
<div class="reel-container">

{% for reel in reels %}
{% if reel.video %}
<div class="reel">

  <video muted loop playsinline onclick="enableSound(this)">
    <source src="{{ reel.video.url }}" type="video/mp4">
  </video>

 
  <div class="reel-info">
    <div class="reel-user">
      <a href="/profile/{{ reel.user }}" style="text-decoration:none; color:white;"><div class="profile-circle">{{ reel.user|slice:":1"|upper }}</div></a>
      <a href="/profile/{{ reel.user }}" style="text-decoration-none; color:white; text-decoration:none;">
            @{{ reel.user }} 
          </a>
    </div>
      <p class="hidden-scroll">{{ reel.caption }}</p>
  </div>
 <div class="reel-actions">
  <div>
    <i class="fa-solid fa-heart"></i>
    <div>{{ reel.no_of_likes }}</div>
 </div>

  <div onclick="openComments('{{ reel.id }}')">
    <i class="fa-solid fa-comment"></i>
    <div id="commentCount-{{ reel.id }}">{{ reel.comments.count }}</div>
  </div>

  <div onclick="downloadReel('{{ reel.video.url }}')">
    <i class="fa-solid fa-download"></i>
    
  </div>

  <i class="fa-solid fa-share" onclick="shareReel('{{ reel.id }}')"></i>
</div>

<div class="comment-box" id="commentBox-{{ reel.id }}">
  <div class="comment-header">
    <span>Comments</span>
    <i class="fa-solid fa-xmark" onclick="closeComments('{{ reel.id }}')"></i>
  </div>
  <div class="comment-list" id="commentList-{{ reel.id }}">
    {% for c in reel.comments.all %}
      <p><b>@{{ c.user }}</b> {{ c.text }}</p>
    {% empty %}
      <p>No comments yet</p>
    {% endfor %}
  </div>
  <div class="comment-input">
    <input type="text" id="commentText-{{ reel.id }}" placeholder="Add a comment...">
    <button onclick="sendComment('{{ reel.id }}')">Send</button>
  </div>
</div>
{% endif %}
{% endfor %}
</div>

<div class="bottom-icons d-md-none">
  <a href="/"><i class="fa-solid fa-house"></i></a>
  <a href="/explore"><i class="fa-solid fa-compass"></i></a>
  <a href="/reels"><i class="fa-solid fa-film"></i></a>
  <a href="#"><i class="fa-solid fa-circle-plus add-icon"></i></a>
  <a href="/profile/{{ user }}"><i class="fa-solid fa-user"></i></a>
</div>


<script src="{% static "js/reels.js" %} "></script>
</body>
</html>
